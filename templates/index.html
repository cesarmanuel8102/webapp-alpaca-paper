
<!DOCTYPE html>
<html>
<head>
    <title>WebApp Alpaca</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .boton { padding: 10px 20px; margin: 5px; }
        .azul { background-color: #00bfff; color: white; }
        .rojo { background-color: #dc3545; color: white; }
        .panel { margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px; }
        pre { background-color: #f8f8f8; padding: 10px; }
    </style>
</head>
<body>
    <h2>üìä WebApp de Trading con Alpaca</h2>
    <button class="boton azul" onclick="ejecutarModelo()">‚ñ∂Ô∏è Ejecutar Modelo</button>
    <button class="boton rojo" onclick="detenerModelo()">‚õî Detener Modelo</button>

    <div class="panel">
        <h3>üìà Estado del Modelo</h3>
        <div id="estado_modelo">Cargando estado...</div>
    </div>

    <div class="panel">
        <h3>üìã Resultado de la √öltima Ejecuci√≥n</h3>
        <pre id="resultado_modelo">Esperando ejecuci√≥n...</pre>
    </div>

    <script>
        async function ejecutarModelo() {
            const res = await fetch("/ejecutar_modelo", { method: "POST" });
            const data = await res.json();
            document.getElementById("resultado_modelo").textContent = data.detalle;
            actualizarEstado();
        }

        async function detenerModelo() {
            const res = await fetch("/detener_modelo", { method: "POST" });
            const data = await res.json();
            actualizarEstado();
        }

        async function actualizarEstado() {
            const res = await fetch("/estado_modelo");
            const data = await res.json();
            document.getElementById("estado_modelo").textContent = 
                "Modelo: " + data.nombre + " | Estado: " + (data.activo ? "Activo" : "Inactivo");
        }

        actualizarEstado();
    </script>
</body>
</html>
